// This file is automatically generated by Keystone, do not modify it manually.
// Modify your Keystone config when you want to change this.

datasource postgresql {
  url               = env("DATABASE_URL")
  shadowDatabaseUrl = env("SHADOW_DATABASE_URL")
  provider          = "postgresql"
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id                  String    @id @default(cuid())
  email               String    @unique @default("")
  password            String
  name                String    @default("")
  role                String?   @default("editor")
  isActive            Boolean   @default(true)
  lastLogin           DateTime?
  createdAt           DateTime? @default(now())
  from_Page_author    Page[]    @relation("Page_author")
  from_Content_author Content[] @relation("Content_author")
}

model Page {
  id                 String     @id @default(cuid())
  title              String     @default("")
  slug               String     @unique @default("")
  type               String?    @default("page")
  excerpt            String     @default("")
  language           String     @default("pt-BR")
  status             String?    @default("draft")
  publishedAt        DateTime?
  seoTitle           String     @default("")
  seoDescription     String     @default("")
  seoKeywords        String     @default("")
  socialTitle        String     @default("")
  socialDescription  String     @default("")
  socialImage        MediaFile? @relation("Page_socialImage", fields: [socialImageId], references: [id])
  socialImageId      String?    @map("socialImage")
  sections           Section[]  @relation("Section_page")
  featuredImage      MediaFile? @relation("Page_featuredImage", fields: [featuredImageId], references: [id])
  featuredImageId    String?    @map("featuredImage")
  author             User?      @relation("Page_author", fields: [authorId], references: [id])
  authorId           String?    @map("author")
  viewCount          Int?       @default(0)
  createdAt          DateTime?  @default(now())
  updatedAt          DateTime?  @default(now())
  from_MenuItem_page MenuItem[] @relation("MenuItem_page")

  @@index([socialImageId])
  @@index([featuredImageId])
  @@index([authorId])
}

model Section {
  id                String     @id @default(cuid())
  name              String     @default("")
  identifier        String     @unique @default("")
  title             String     @default("")
  subtitle          String     @default("")
  language          String     @default("pt-BR")
  page              Page?      @relation("Section_page", fields: [pageId], references: [id])
  pageId            String?    @map("page")
  isActive          Boolean    @default(true)
  sortOrder         Int?       @default(0)
  backgroundColor   String     @default("")
  backgroundImage   MediaFile? @relation("Section_backgroundImage", fields: [backgroundImageId], references: [id])
  backgroundImageId String?    @map("backgroundImage")
  cssClass          String     @default("")
  padding           String?    @default("medium")
  blocks            Block[]    @relation("Block_section")
  settings          Json?      @default("{}")
  createdAt         DateTime?  @default(now())

  @@index([pageId])
  @@index([backgroundImageId])
}

model Block {
  id              String      @id @default(cuid())
  title           String      @default("")
  type            String
  content         String      @default("")
  subtitle        String      @default("")
  buttonText      String      @default("")
  buttonUrl       String      @default("")
  image           MediaFile?  @relation("Block_image", fields: [imageId], references: [id])
  imageId         String?     @map("image")
  video           MediaFile?  @relation("Block_video", fields: [videoId], references: [id])
  videoId         String?     @map("video")
  gallery         MediaFile[] @relation("Block_gallery")
  layout          String?     @default("center")
  backgroundColor String      @default("")
  textColor       String      @default("")
  cssClass        String      @default("")
  section         Section?    @relation("Block_section", fields: [sectionId], references: [id])
  sectionId       String?     @map("section")
  googleForm      GoogleForm? @relation("Block_googleForm", fields: [googleFormId], references: [id])
  googleFormId    String?     @map("googleForm")
  sortOrder       Int?        @default(0)
  isVisible       Boolean     @default(true)
  settings        Json?       @default("{}")
  createdAt       DateTime?   @default(now())

  @@index([imageId])
  @@index([videoId])
  @@index([sectionId])
  @@index([googleFormId])
}

model MediaFile {
  id                           String    @id @default(cuid())
  name                         String    @default("")
  alt                          String    @default("")
  caption                      String    @default("")
  url                          String    @default("")
  filename                     String    @default("")
  mimeType                     String    @default("")
  filesize                     Int?
  width                        Int?
  height                       Int?
  type                         String?   @default("image")
  category                     String?   @default("general")
  tags                         String    @default("")
  seoTitle                     String    @default("")
  isActive                     Boolean   @default(true)
  isFeatured                   Boolean   @default(false)
  usageCount                   Int?      @default(0)
  createdAt                    DateTime? @default(now())
  from_Page_socialImage        Page[]    @relation("Page_socialImage")
  from_Page_featuredImage      Page[]    @relation("Page_featuredImage")
  from_Section_backgroundImage Section[] @relation("Section_backgroundImage")
  from_Block_image             Block[]   @relation("Block_image")
  from_Block_video             Block[]   @relation("Block_video")
  from_Block_gallery           Block[]   @relation("Block_gallery")
}

model GoogleForm {
  id                    String    @id @default(cuid())
  name                  String    @default("")
  language              String    @default("pt-BR")
  googleFormUrl         String    @default("")
  embedUrl              String    @default("")
  title                 String    @default("")
  description           String    @default("")
  buttonText            String    @default("Preencher Formul√°rio")
  displayType           String?   @default("button")
  buttonColor           String    @default("#007bff")
  buttonSize            String?   @default("medium")
  clickCount            Int?      @default(0)
  isActive              Boolean   @default(true)
  createdAt             DateTime? @default(now())
  from_Block_googleForm Block[]   @relation("Block_googleForm")
}

model Setting {
  id           String    @id @default(cuid())
  key          String    @unique @default("")
  name         String    @default("")
  value        String    @default("")
  defaultValue String    @default("")
  category     String?   @default("general")
  language     String?   @default("global")
  type         String?   @default("text")
  description  String    @default("")
  isPublic     Boolean   @default(false)
  isRequired   Boolean   @default(false)
  validation   Json?
  updatedAt    DateTime? @default(now())
}

model PageView {
  id        String   @id @default(cuid())
  page      String   @default("")
  language  String   @default("pt-BR")
  userAgent String   @default("")
  ipAddress String   @default("")
  referrer  String   @default("")
  timestamp DateTime @default(now())
}

model Menu {
  id          String     @id @default(cuid())
  name        String     @default("")
  identifier  String     @unique @default("")
  language    String     @default("pt-BR")
  location    String?    @default("header")
  description String     @default("")
  isActive    Boolean    @default(true)
  cssClass    String     @default("")
  maxDepth    Int?       @default(3)
  items       MenuItem[] @relation("MenuItem_menu")
  createdAt   DateTime?  @default(now())
  updatedAt   DateTime?  @default(now())
}

model MenuItem {
  id            String     @id @default(cuid())
  label         String     @default("")
  url           String     @default("")
  type          String?    @default("internal")
  target        String?    @default("_self")
  icon          String     @default("")
  description   String     @default("")
  order         Int?       @default(0)
  isActive      Boolean    @default(true)
  isHighlighted Boolean    @default(false)
  requiresAuth  Boolean    @default(false)
  cssClass      String     @default("")
  menu          Menu?      @relation("MenuItem_menu", fields: [menuId], references: [id])
  menuId        String?    @map("menu")
  page          Page?      @relation("MenuItem_page", fields: [pageId], references: [id])
  pageId        String?    @map("page")
  parentItem    MenuItem?  @relation("MenuItem_parentItem", fields: [parentItemId], references: [id])
  parentItemId  String?    @map("parentItem")
  children      MenuItem[] @relation("MenuItem_parentItem")
  clickCount    Int?       @default(0)
  createdAt     DateTime?  @default(now())
  updatedAt     DateTime?  @default(now())

  @@index([menuId])
  @@index([pageId])
  @@index([parentItemId])
}

model Content {
  id             String    @id @default(cuid())
  title          String    @default("")
  slug           String    @unique @default("")
  excerpt        String    @default("")
  content        String    @default("")
  language       String    @default("pt-BR")
  status         String?   @default("draft")
  publishedAt    DateTime?
  seoTitle       String    @default("")
  seoDescription String    @default("")
  featuredImage  String    @default("")
  author         User?     @relation("Content_author", fields: [authorId], references: [id])
  authorId       String?   @map("author")
  createdAt      DateTime? @default(now())
  updatedAt      DateTime? @default(now())

  @@index([authorId])
}
